<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[David Beveridge]]></title>
  <link href="http://davidbeveridge.net/atom.xml" rel="self"/>
  <link href="http://davidbeveridge.net/"/>
  <updated>2016-09-10T21:28:18-06:00</updated>
  <id>http://davidbeveridge.net/</id>
  <author>
    <name><![CDATA[David Beveridge]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Effective Code Reviews]]></title>
    <link href="http://davidbeveridge.net/blog/2014/09/29/effective-code-reviews/"/>
    <updated>2014-09-29T12:12:00-06:00</updated>
    <id>http://davidbeveridge.net/blog/2014/09/29/effective-code-reviews</id>
    <content type="html"><![CDATA[<p>Code reviews are a great way to improve code quality, catch bugs, and keep your
whole team in sync with the latest changes.  My favorite tool for doing a code
review is still Github’s <a href="https://help.github.com/articles/using-pull-requests">Pull Request</a> feature, because of the
easily-accessible diffs, inline comments, and commit-level and PR-level views of
the file changes.</p>

<p>So, how do we make the code review process effective? I offer the following
tips:</p>

<ul>
  <li>Actually review PR’s; telling an author to “just ship it” is detrimental.</li>
  <li>Senior developers <em>want</em> you to review their code; don’t be scared.</li>
  <li>Close PR’s that don’t have specs</li>
  <li>If spec coverage is sparse, discuss it with the author (nicely).</li>
  <li>Spec descriptions should accurately reflect the behavior of the module/method
they describe.</li>
  <li>Ask questions instead of making statements; the author likely put more thought
into the code than you are aware of, and they’ve already solved the problem
once.</li>
  <li>Look for design problems:
    <ul>
      <li>Does this change solve a real problem? is it worth solving?</li>
      <li>Given the constraints, is the overall approach correct and reasonable?</li>
    </ul>
  </li>
  <li>Look for <a href="http://c2.com/cgi/wiki?CodeSmell">code smells</a> and suggest refactorings.</li>
  <li>Ask for help with reviewing code that is outside your area of expertise.</li>
</ul>

<!--more-->

<hr />

<p>Ever seen a “code review” that looks like this?</p>

<blockquote>
  <p>LGTM :ship:</p>
</blockquote>

<p>This is not a helpful code review. Rather than communicating the message, “good
job,” it tells the author that you can’t or won’t take the time and effort
required to properly review their work.</p>

<p>If you’ve ever done this, you’re not alone, and I’m not going to yell at
you—I’ve done it too.</p>

<p>I often hear people say they aren’t qualified to review some portion of a pull
request; generally, this is because of a lack of familiarity with the language
used, or of the frameworks.  While this is an understandable view, I argue that
<strong>you are</strong>, in fact, <strong>qualified to review the code</strong>.  That’s true even if it’s
not your favorite language, or you’re not particularly good at programming in
that language, or you’re not familiar with the framework.  How do you review
code you’re not well-versed in?</p>

<h2 id="remember-that-code-reviews-are-a-service-not-an-insult">Remember that code reviews are a service, not an insult.</h2>

<p>Please, please, review my code! I think everyone who has a title like “Senior
X”, “Director of X”, “X Architect,” or whatever else knows the importance of
having someone look over their code, ask questions, and point out mistakes.  You
don’t need to be afraid of reviewing someone’s code, no matter their position.
It’s ok.  I am not my code.  Neither is anyone else.  I also still write bad
code sometimes.  So does everyone else.  We all need peer reviews, and we are
all peers here.</p>

<p>Moreover, if you are reviewing code from a senior developer, <strong>don’t be a
yes-man!</strong> Point out mistakes you see, ask about why specs are written a certain
way, ask about architecture decisions, point out weird styling issues…
“Senior” people need help too.  If someone gets mad at you for nicely
pointing out oversights or for asking questions, that’s a sign of immaturity,
not seniority.</p>

<h2 id="ensure-that-there-is-only-one-feature-in-the-pull-request">Ensure that there is only one feature in the pull request</h2>

<p>Each organization does things a bit differently, but ideally, your pull requests
should correspond to exactly one user story.  If you can achieve this level of
granularity, you gain a number of benefits:</p>

<ul>
  <li>A feature spec can accompany the PR, and can be verified by your CI server.</li>
  <li>The code will be easier to reason about.</li>
  <li>If you use the <a href="http://nvie.com/posts/a-successful-git-branching-model/">nvie branching model</a> (and you squash on merge), you can
easily define different releases and cherry-pick features as you please.</li>
</ul>

<h2 id="check-that-nearly-all-code-has-an-accompanying-specification">Check that (nearly) all code has an accompanying specification.</h2>

<p>If someone writes code without writing specs, they’ve introduced an unspecified,
undocumented landmine into the code base.  Your organization may have some
policy about test-first, coverage level, etc.; I’m not going to get into that.</p>

<p>If you review code and there are no specs, talk to the author about it first.
Discuss the importance of specifications, and offer to help them with writing
some.  I often suggest that the PR be closed and the code be rewritten using
TDD.</p>

<p>Why do I recommend rewriting the code? Because if code was not driven by a spec,
it is difficult to specify ex post facto.  Bolting unit tests onto untested code
results in brittle tests, encourages kludgy design, increases technical debt,
and will make refactoring difficult in the future.  If tests must be added on
afterwards, they should be intergration tests.</p>

<p>I don’t say any of this to encourage dogmatic, or bully-like behavior.  You and
the author should discuss the specs, and their importance, and can come to a
decision about the code together.</p>

<p>P.S.: Don’t close PR’s for purely cosmetic (i.e., only CSS/HTML) changes
on this basis.</p>

<h3 id="what-about-spikes-arent-they-the-exception">What about spikes? Aren’t they the exception?</h3>

<p>Nope.  Spikes are a really great tool, but their purpose is to provide a
short-term proof-of-concept.  They shouldn’t be merged; in fact, they shouldn’t
even be reviewed.  After a spike, should do a quick rewrite with specs.</p>

<h2 id="look-for-specs-and-ask-about-the-coverage-level">Look for specs, and ask about the coverage level.</h2>

<p>The first thing I do when I look at a PR is check the list of files changed (the
github email digests are useful for this).  If you see <code>generic_modal.coffee</code>
was changed, then you should also see that <code>generic_modal_spec.coffee</code> (or
something else that matches your naming scheme) was changed in the same PR.</p>

<p>Ideally, they should be changed in the same commit, or the spec should be
changed first.  This is not a rule, just a guideline; everyone commits a bit
differently.</p>

<p>As mentioned above, keep an eye out for a feature spec (aka integration test).
Optimally, there should be a one-to-one correspondence between a user story, a
feature spec, and a pull request.</p>

<p>There should be relevant specs for all the code, both frontend and backend.  If
you don’t see something close to a 1-1 mapping between specs and source code,
ask the author what’s going on.  Some source code doesn’t need its own spec
file: it may have been extracted from a spec’d module during a refactor; that’s
ok.</p>

<p>If the author just neglected to write the specs, the PR should not be merged.
This PR may be used as a reference for a spec-driven rewrite of the feature.  If
I see a PR without tests, I will close it. Specs are what give us the confidence
we need to make changes later; we can’t afford to neglect them.</p>

<h2 id="read-through-the-specs-they-should-make-sense">Read through the specs; they should make sense.</h2>

<p>When you read through the specs, you should be able to quickly understand what
each module does and what its public interface looks like.  You should see
relevant <code>describe</code> blocks, <code>context</code>s, and <code>it</code> descriptions (or whatever your
testing framework provides); they should describe, in English, what the
module/API/UI does, and the code inside each should reasonably correspond to
that description.</p>

<p>Ask the author to change non-obvious descriptions and tests; suggest a better
description.  For example:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nx">describe</span> <span class="s">&#39;#fullName&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span>
</span><span class="line">  <span class="nx">it</span> <span class="s">&quot;works&quot;</span><span class="p">,</span> <span class="nf">-&gt;</span>
</span><span class="line">    <span class="nv">person = </span><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="s">&quot;Doe&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="nx">expect</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s">&quot;John Doe&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The above spec, “it works” makes no sense.  The code inside is fine, but the
description should be more like:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nx">describe</span> <span class="s">&#39;#fullName&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span>
</span><span class="line">  <span class="nx">it</span> <span class="s">&quot;yields the full name of the person, space-separated&quot;</span><span class="p">,</span> <span class="nf">-&gt;</span>
</span><span class="line">    <span class="nv">person = </span><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s">&quot;John&quot;</span><span class="p">,</span> <span class="s">&quot;Doe&quot;</span><span class="p">)</span>
</span><span class="line">    <span class="nx">expect</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">fullName</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s">&quot;John Doe&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="if-there-is-backend-and-frontend-code-mentally-separate-them-and-review-both">If there is backend and frontend code, mentally separate them and review both.</h2>

<p>In a web project, many times the backend and frontend components are written in
different languages.  When you’re only working on one part of the stack, it’s
easy to just ignore code from the other parts.  Instead, use PR’s as a learning
opportunity; the other parts of the stack will affect the maintainability of the
project just as much as the parts you’re working with, so make sure you look at
both.</p>

<p>I find that it helps me to treat the backend and frontend code in a PR as if they
were separate PR’s.  It’s just a mental separation for me.</p>

<p>This works best when a pull request is for only one feature.  The more features
that are lumped together, the harder it is to review and, as a result, the
largest PR’s end up with the worst reviews.</p>

<h2 id="be-encouraging">Be encouraging</h2>

<p>The purpose of code reviews is to build up, not to tear down.  That goes for both
the code and the team.  If you see something that was done well, say so! For
example, “I like the way you were able to refactor that giant for-loop into a
couple of <code>map</code> and <code>reduce</code> calls! I’ll have to keep an eye out for that in my
own code!”</p>

<p>Everyone likes to receive positive feedback about their work.  Plus, it will
make you seem more appealing to work with, and it improves cohesiveness with the
rest of the team.</p>

<p>Also, try adding some <a href="http://www.emoji-cheat-sheet.com/">emoji</a>, or some <a href="http://giphy.com/">funny gifs</a> to lighten the
mood.</p>

<h2 id="have-you-tried-asking-questions-rather-than-making-statements">Have you tried asking questions, rather than making statements?</h2>

<p>According to Dr. Albert Mehrabian, only <a href="http://www.kaaj.com/psych/smorder.html">7% of our face-to-face communication is
accounted for</a> by the words we say.  In the faceless, voiceless world
of a text-based code review, it can be easy to offend someone, especially since
people in our line of work tend to put so much care into their code.  An easy
way to diffuse this is to ask questions.  For example, you see the following
code:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="coffeescript"><span class="line"><span class="nv">rgba = </span><span class="nx">hex</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\d{2}/</span><span class="p">).</span><span class="nx">map</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You could say,</p>

<blockquote>
  <p>This is wrong.  Your split returns [””, “”, “”], and parseInt needs a radix of
16.</p>
</blockquote>

<p>Or, you could ask,</p>

<blockquote>
  <p>This doesn’t make sense to me; I think this will always yield <code>[NaN, NaN,
Nan]</code>.  Did I miss something?</p>
</blockquote>

<p>Which would you rather someone post on your PR? I prefer the latter.</p>

<p>Asking questions is a powerful thing.  When someone questions my code, sometimes
that’s the first spark of thought about an alternative approach.  Sometimes,
it’s a gentle reminder that I left out a use case, or forgot to remove my debug
lines, or left a swath of commented code.</p>

<p>My favorite is when someone new to my language of choice asks a question about
my code.  Sometimes it’s a chance for them to learn something new.  Other times
it’s a chance for me to break an age-old habit; you wouldn’t believe how many
IE5/6 hacks I use out of habit…</p>

<p>If you’re not sure whether something is right, just ask the author.  If it’s a
mistake, they’ll recognize it and provide a fix.  If it was intentional, they
can justify whatever it is; you may even learn something.</p>

<h2 id="suggest-refactoring-in-both-the-specs-and-the-source">Suggest refactoring in both the specs and the source.</h2>

<p>Sometimes others point out code that I could refactor better; it’s easy to
think I’m done refactoring when my head has been stuck in the same code for the
last 6+ hours.</p>

<p>In the specs, point out where the testing tools could be better used.  For
example, I often forget about some of the features of a stubbing library.  I
sometimes write verbose, repetetive tests that could be extracted into a test
helper.  I also find that sometimes other developers can help make my tests less
fragile.  If you have an idea about improving the specs, share it!  It may be
helpful to add custom matchers to your spec suite; most tools support this in
some fashion.</p>

<p>Do the same with the code! If you see where a specific refactoring can apply,
say so.  Look for code smells; you can refer to <a href="http://c2.com/cgi/wiki?CodeSmell">Cunningham &amp; Cunningham’s wiki
page on Code Smells</a>.</p>

<p>We need to strike a balance here, too.  The point of refactoring is to make
the code easier to reason about, not to push indirection to its limits.</p>

<h2 id="ask-for-help">Ask for help.</h2>

<p>It never hurts to have another pair of eyes on the code.  Ask a senior person in
your organization (or another open-source developer) to take a look; most will
be glad to.  If you know someone else with relevant experience, ask them!  Most
developers will gladly look over a PR with you.</p>

<p>If the PR contains a lot of code in a language you’re not great at, be proactive
and find someone who is, and ask them to review with you!  For example, if
there’s a lot of CSS, and you’re not great at it, ask a frontend developer to
help.</p>

<h2 id="the-code-checklist">The Code Checklist</h2>

<p>When it comes to most code (obviously this doesn’t apply to markup or styling
code), try the following checklist:</p>

<ul>
  <li>Is every piece of code in the right place, i.e. model code in a model,
controller logic in a controller, app-specific helper code in a helper,
generic helper code in a library?</li>
  <li>Do all classes have only one responsibility?</li>
  <li>Do all methods do only one thing?</li>
  <li>If a method has a side-effect, is it clear from the name, and otherwise
documented?</li>
  <li>Are all classes/methods/variables named properly so that the code is
self-describing?</li>
  <li>Is everything as private as possible, i.e. only the intended public interface
is public?</li>
  <li>Are too many things private?  This could be an indication that you should
extract an object.</li>
  <li>Are all files within a reasonable size (e.g., less than 100 lines of code)?</li>
  <li>Are all methods less than 10 lines of code?</li>
  <li>No law of demeter violations (providing whole objects to methods when all
that’s needed is the value of one attribute of them)?</li>
  <li>Is everything tested? Is each thing tested enough?</li>
  <li>Are there tests for private methods? This is a code smell.</li>
  <li>Every class should have a small comment describing what it represents/does.
Public methods should have comments describing what they are for, or when to
call them, if this isn’t obvious from the code. Comments shouldn’t describe what
the method does (this is visible from looking at the code).</li>
  <li>Are there any obvious performance-stupidities, like making a database query
for each loop iteration, rather than using a more optimized query that loads
all data at once?</li>
  <li>Spacing errors like no empty line between methods, or too many empty lines</li>
  <li>There shouldn’t be any commented-out code.</li>
  <li>There should be no debug statements like “console.log” or the likes.</li>
</ul>

<p><em>Note: This article was first posted at <a href="http://blog.originate.com/blog/2014/09/29/effective-code-reviews/">blog.originate.com</a></em></p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ECMAScript 6 - Default, Rest, and Spread Arguments]]></title>
    <link href="http://davidbeveridge.net/blog/2014/08/01/ecmascript-6-default-rest-spread-params/"/>
    <updated>2014-08-01T07:00:00-06:00</updated>
    <id>http://davidbeveridge.net/blog/2014/08/01/ecmascript-6-default-rest-spread-params</id>
    <content type="html"><![CDATA[<p>Ever wanted a default value for an arugment? Or the ability to work with
variable numbers of arguments more easily?  Ever written code like this?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">bar</span> <span class="o">=</span> <span class="nx">bar</span> <span class="o">||</span> <span class="s1">&#39;default value&#39;</span><span class="p">;</span>
</span><span class="line">  <span class="kd">var</span> <span class="nx">theRest</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Perhaps you’re familiar with <a href="http://coffeescript.org/#splats">CoffeeScript’s splat arguments</a>
(<code>...</code>); or, if you’ve ever used Ruby, you’ll be familiar with
<a href="http://pivotallabs.com/ruby-pearls-vol-1-the-splat/">the Ruby splat operator</a>.</p>

<p>Maybe you’ve needed to use an array as an argument list? Ever done this?</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
</span><span class="line"><span class="nx">doSomethingWithArgs</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><strong>The days of using <code>[].slice.call</code> and <code>fn.apply(null, args)</code> are over!
Finally, JavaScript is introducing a splat-like operator!</strong>  Say hello to
default, rest, and spread arguments!</p>

<!--more-->
<p>## Default Arguments</p>

<p>Taking default arguments is now as simple as</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">bar</span><span class="o">=</span><span class="s1">&#39;default value&#39;</span><span class="p">)</span> <span class="p">{}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Pretty neat, huh?</p>

<h2 id="rest-arguments">Rest Arguments</h2>

<p>You need to get the tail of your argument list? Just use <code>...</code></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="p">...</span><span class="nx">bars</span><span class="p">)</span> <span class="p">{}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="spread-arguments">Spread Arguments</h2>

<p>If you’ve ever needed to apply an Array as a list of arguments, you can now do
it like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">args</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">];</span>
</span><span class="line"><span class="nx">doSomethingWithArgs</span><span class="p">(...</span><span class="nx">args</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Spread arguments should still work with default and rest arguments, as well as
argument destructuring.  Support for this is a little spotty, though.  The
following example worked in FireFox v31.0; Traceur validated the code, but
failed to execute it.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">familyInfo</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">spouse</span><span class="o">=</span><span class="s2">&quot;Lucy&quot;</span><span class="p">,</span> <span class="p">...</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kd">var</span> <span class="nx">out</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class="line">  <span class="nx">out</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;My name is &quot;</span><span class="o">+</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="nx">spouse</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">out</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;  I&#39;m married to &quot;</span><span class="o">+</span><span class="nx">spouse</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="nx">out</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;  My children are &quot;</span><span class="o">+</span><span class="nx">children</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">dependents</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Lucy&quot;</span><span class="p">,</span> <span class="s2">&quot;Little Ricky&quot;</span><span class="p">];</span>
</span><span class="line">
</span><span class="line"><span class="nx">familyInfo</span><span class="p">(</span><span class="s2">&quot;Ricky&quot;</span><span class="p">);</span>
</span><span class="line"><span class="c1">// =&gt; &quot;My name is Ricky.  I&#39;m married to Lucy.&quot;</span>
</span><span class="line">
</span><span class="line"><span class="nx">familyInfo</span><span class="p">(</span><span class="s2">&quot;Ricky&quot;</span><span class="p">,</span> <span class="p">...</span><span class="nx">dependents</span><span class="p">);</span>
</span><span class="line"><span class="c1">// =&gt; &quot;My name is Ricky.  I&#39;m married to Lucy.  My children are Little Ricky.&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="experiments-with-defaults-and-rest-params">Experiments with defaults and rest params</h2>

<p>So, we saw an example above where default and splat played nice (at least in
FireFox); here’s one that doesn’t work:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">badArgsTest</span><span class="p">(...</span><span class="nx">args</span><span class="p">,</span> <span class="nx">other</span><span class="p">)</span> <span class="p">{}</span>
</span><span class="line">
</span><span class="line"><span class="c1">// FireFox throws: &quot;SyntaxError: parameter after rest parameter&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ok.  So, rest parameters come last.  Always.</p>

<p>Try this one:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="p">(</span><span class="kd">function</span><span class="p">(...</span><span class="nx">args</span><span class="o">=</span><span class="p">[])</span> <span class="p">{})</span>
</span><span class="line">
</span><span class="line"><span class="c1">// FireFox throws: &quot;SyntaxError: rest parameter may not have a default&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Ok.  So, don’t do that.</p>

<h3 id="default-argument-order">Default argument order</h3>

<p>Guess what?  You can use default arguments in pretty much any order (as long as
they come before the rest argument).  This one really stumped me at first, but I
got it: use <code>undefined</code></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">testDefaults</span><span class="p">(</span><span class="nx">foo</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="nx">baz</span><span class="p">,</span> <span class="nx">bang</span><span class="o">=</span><span class="s1">&#39;whizz&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="p">[</span><span class="nx">foo</span><span class="p">,</span> <span class="nx">baz</span><span class="p">,</span> <span class="nx">bang</span><span class="p">];</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="nx">testDefaults</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span> <span class="s1">&#39;whir&#39;</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">);</span> <span class="c1">// =&gt; [&#39;bar&#39;, &#39;whir&#39;, &#39;whizz&#39;]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>I also tried this with some falsy values; they seem to actually pass through:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">testDefaults</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;whir&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span> <span class="c1">// =&gt; [null, &#39;whir&#39;, null]</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="the-wrap-up">The wrap up</h2>

<ul>
  <li>Defaults: <code>(someArg = 'default', other = 4) =&gt; {}</code>; <code>someArg</code> and <code>other</code> can
be overwritten, but will carry default values.</li>
  <li>Pass <code>undefined</code> if you want the default value for a positional argument</li>
  <li>Rest: <code>(arg1, ...args) =&gt; {}</code>; <code>args</code> will be an <code>Array</code> of everything after
<code>arg1</code>.</li>
  <li>Use rest arguments as the last argument in your function</li>
  <li>Spread: <code>var args = [1,2,3]; someFunction(...args);</code> works great, no more
using <code>apply</code> for this trick</li>
</ul>

<p>Next time, I’ll take a look at argument destructuring, which is a great
complement to rest, default, and spread arguments.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ECMAScript 6 - Arrow Functions]]></title>
    <link href="http://davidbeveridge.net/blog/2014/07/28/ecmascript-6-arrow-functions/"/>
    <updated>2014-07-28T07:00:00-06:00</updated>
    <id>http://davidbeveridge.net/blog/2014/07/28/ecmascript-6-arrow-functions</id>
    <content type="html"><![CDATA[<p>One of my favorite proposals for ECMAScript 6 is the proposal to add a
convenient labmda syntax: <a href="http://tc39wiki.calculist.org/es6/arrow-functions/">Arrow Functions</a>.</p>

<p>Personally, I get sick of typing <code>function (){}</code> all the time (ok, I don’t
usually type it, my editor takes care of it).</p>

<p>Say I want to do some functional stuff (silly example):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">numbers</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">];</span>
</span><span class="line"><span class="c1">// map a list of even/odd pairs, multiplied</span>
</span><span class="line"><span class="nx">numbers</span>
</span><span class="line">  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;}</span> <span class="p">)</span>
</span><span class="line">  <span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">numbers</span><span class="p">[</span><span class="nx">i</span><span class="o">+</span><span class="mi">1</span><span class="p">];</span> <span class="p">}</span> <span class="p">);</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Yay! Much more convenient.  But, arrow functions are not <em>exactly</em> like
<code>function</code>s.  How, you ask?</p>

<!--more-->

<h3 id="arrow-functions-are-still-functions">Arrow functions are still functions</h3>

<p>Arrow functions still respond to <code>typeof</code> and <code>instanceof</code> the same as a
function:</p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="k">typeof</span> <span class="p">(</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{}</span> <span class="p">);</span> <span class="c1">// =&gt; &quot;function&quot;</span>
</span><span class="line"><span class="p">(</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{}</span> <span class="p">)</span> <span class="k">instanceof</span> <span class="nb">Function</span><span class="p">;</span> <span class="c1">// =&gt; true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And their <code>constructor</code> property is still <code>Function</code>:</p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="p">(</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{}</span> <span class="p">).</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nb">Function</span><span class="p">;</span> <span class="c1">// =&gt; true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And they still support the typical function properties:</p>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">let</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{}</span>
</span><span class="line"><span class="k">typeof</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">;</span> <span class="c1">// =&gt; &quot;function&quot;</span>
</span><span class="line"><span class="k">typeof</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">bind</span><span class="p">;</span> <span class="c1">// =&gt; &quot;function&quot;</span>
</span><span class="line"><span class="k">typeof</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">;</span> <span class="c1">// =&gt; &quot;function&quot;</span>
</span><span class="line"><span class="nx">fn</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span> <span class="c1">// =&gt; &quot;(a,b,c) =&gt; {}&quot;</span>
</span><span class="line"><span class="nx">fn</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="c1">// =&gt; 3</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And you can still use <code>arguments</code> (although, you probably won’t need to if you
use the new default/rest/spread arguments):</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">let</span> <span class="nx">fn</span>  <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">arguments</span><span class="p">;</span> <span class="p">}</span>
</span><span class="line"><span class="nx">fn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">);</span> <span class="c1">// =&gt; { 0: 1, 1: 2, 2: 3, 3: &quot;foo&quot;, 4: &quot;bar&quot;, callee: fn(), length: 5};</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="arrow-functions-are-lexically-bound-to-the-current-context">Arrow functions are lexically bound to the current context.</h3>

<p>With regular <code>function</code>s, we can do this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">david</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;David&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Beveridge&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">fullName</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">;</span> <span class="p">}</span>
</span><span class="line"><span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="nx">david</span><span class="p">.</span><span class="nx">fullName</span><span class="p">();</span> <span class="c1">// =&gt; &quot;David Beveridge&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>With an arrow function, we get a different result:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">var</span> <span class="nx">david</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">firstName</span><span class="o">:</span> <span class="s1">&#39;David&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">lastName</span><span class="o">:</span> <span class="s1">&#39;Beveridge&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="nx">fullName</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">lastName</span><span class="p">;</span> <span class="p">}</span>
</span><span class="line"><span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="nx">david</span><span class="p">.</span><span class="nx">fullName</span><span class="p">();</span> <span class="c1">// =&gt; &quot;undefined undefined&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>How come that happened? Because with an arrow function, <code>this</code> refers to the
same <code>this</code> that was in scope at the time of declaration.  In this case, <code>this</code>
was <code>window</code> (if you’re running in a browser) or <code>global</code> (if you’re running in
Node).</p>

<h3 id="arrow-functions-cant-be-dynamically-re-bound">Arrow functions can’t be dynamically re-bound.</h3>

<p>This really goes back to the lexical binging; you can’t change the binding of an
arrow function.  With regular <code>function</code>s, we can do cool stuff like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Global Name&quot;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">david</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;David Beveridge&#39;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">getName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="nx">getName</span><span class="p">();</span> <span class="c1">// =&gt; &quot;Global Name&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rebind w/ Function.prototype.bind</span>
</span><span class="line"><span class="nx">getName</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">david</span><span class="p">)();</span> <span class="c1">// =&gt; &quot;David Beveridge&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rebind with Function.prototype.call</span>
</span><span class="line"><span class="nx">getName</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">david</span><span class="p">);</span> <span class="c1">// =&gt; &quot;David Beveridge&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rebind with Function.prototype.apply</span>
</span><span class="line"><span class="nx">getName</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">david</span><span class="p">);</span> <span class="c1">// =&gt; &quot;David Beveridge&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This is not the case with arrows, though:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Global Name&quot;</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">david</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;David Beveridge&#39;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="kd">var</span> <span class="nx">getName</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="nx">getName</span><span class="p">();</span> <span class="c1">// =&gt; &quot;Global Name&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rebind w/ Function.prototype.bind</span>
</span><span class="line"><span class="nx">getName</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">david</span><span class="p">)();</span> <span class="c1">// =&gt; &quot;Global Name&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rebind with Function.prototype.call</span>
</span><span class="line"><span class="nx">getName</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">david</span><span class="p">);</span> <span class="c1">// =&gt; &quot;Global Name&quot;</span>
</span><span class="line">
</span><span class="line"><span class="c1">// Rebind with Function.prototype.apply</span>
</span><span class="line"><span class="nx">getName</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">david</span><span class="p">);</span> <span class="c1">// =&gt; &quot;Global Name&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="arrow-functions-cant-be-used-as-constructors">Arrow functions can’t be used as constructors</h3>

<p>Constructor functions sort of rely on dynamic rebinding for access to the <code>this</code>
property:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">TestConstructor</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">&quot;bar&quot;</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="k">new</span> <span class="nx">TestConstructor</span><span class="p">;</span> <span class="c1">// =&gt; TestConstructor {foo: &quot;bar&quot;}</span>
</span><span class="line"><span class="nx">TestConstructor</span><span class="p">();</span> <span class="c1">// Whoops! This sets window.foo to &quot;bar&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Since arrow functions can’t be rebound, ever, it follows that they can’t be
constructors:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">let</span> <span class="nx">TestConstructor</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{}</span>
</span><span class="line">
</span><span class="line"><span class="k">new</span> <span class="nx">TestConstructor</span><span class="p">();</span> <span class="c1">// =&gt; TypeError: TestConstructor is not a constructor</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="the-wrap-up">The wrap up</h2>

<p>That’s about it.  Arrow functions are a great syntactical shortcut for cases
where you want a closure that keeps its binding.  Remember:</p>

<ul>
  <li>Arrows keep the <code>this</code> binding where they were declared</li>
  <li>Arrow functions can’t be rebound</li>
  <li>No use of the word <code>new</code></li>
</ul>

<p>On their own, they may not seem that powerful, but they can do some cool stuff
when you use them in combination with other ES6 features like
default/rest/spread arguments, destructuring, itererators, <code>let</code>/<code>const</code>, and
the like.  Stay tuned for the latest on those.</p>

]]></content>
  </entry>
  
</feed>
